<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fig Ellis — Designed in Field Light</title>
<meta name="description" content="Fig Ellis — architectural simplicity meets living system." />
<link rel="stylesheet" href="/assets/css/modes.css">
<style>
  :root{ --bg:#1E2328; --text:#C5A76C; --feed-height:120px; --speed-pps:30; --gap:14px; }
  *{ box-sizing:border-box; } html,body{ height:100%; }
  body{ margin:0; background:#1E2328; color:#C5A76C;
        font-family:"Helvetica Now Condensed Light","Helvetica Neue",Helvetica,Arial,system-ui,-apple-system,"Segoe UI",sans-serif;
        -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
  a{ color:#C5A76C; text-decoration:none; border-bottom:1px solid rgba(197,167,108,.35); }
  a:hover{ border-bottom-color:rgba(197,167,108,.6); }

  .artifact-feed{ position:sticky; top:0; z-index:10; width:100%; height:var(--feed-height);
                  background:#1E2328; overflow:hidden; border:0; margin:0; padding:0; }
  .artifact-track{ display:flex; align-items:center; height:100%; gap:var(--gap); }
  .artifact{ flex:0 0 auto; height:calc(var(--feed-height) - 2px); aspect-ratio:16/9; position:relative; overflow:hidden; border:0; }
  .artifact img{ width:100%; height:100%; display:block; object-fit:cover; object-position:center; border:0; filter:saturate(100%); }

  .tooltip{ position:fixed; pointer-events:none; background:rgba(30,35,40,.92); color:#C5A76C;
            padding:8px 10px; font-size:12px; line-height:1.35; border:1px solid rgba(197,167,108,.25);
            border-radius:8px; max-width:44ch; transform:translate(-50%, calc(-100% - 12px));
            opacity:0; transition:opacity .12s linear; z-index:9999; }

  .wrap{ display:grid; place-items:center; padding:48px 20px; }
  .card{ width:clamp(280px,88vw,860px); border-radius:20px; padding:28px 28px 24px;
         background:rgba(0,0,0,.08); outline:1px solid rgba(197,167,108,.20); backdrop-filter:blur(2px); margin-top:28px; }
  .brand{ display:flex; gap:24px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
  .brand img{ width:clamp(120px,22vw,240px); height:auto; display:block; border-radius:16px; outline:1px solid rgba(197,167,108,.20); }
  h1{ margin:0 0 8px; font-weight:300; letter-spacing:.02em; font-size:clamp(28px,4vw,44px); line-height:1.1; }
  p{ margin:0 0 14px; font-size:clamp(14px,1.8vw,18px); line-height:1.5; opacity:.95; }

  @media (prefers-reduced-motion: reduce){ .artifact-track{ animation:none !important; } }
  @keyframes scrollLoop{ from{ transform:translateX(0);} to{ transform:translateX(var(--scroll-end, -50%)); } }

  .mark{ position:fixed; right:18px; bottom:18px; width:22px; height:22px; border:2px solid #C5A76C; border-top:none; border-left:none; opacity:.9; }
</style>
</head>
<body>

<div class="artifact-feed" aria-label="Artifact Feed — Continuous">
  <div class="artifact-track" id="artifactTrack"></div>
</div>

<div class="wrap">
  <main class="card" role="main">
    <section class="brand">
      <img src="/assets/fige-tile.png" alt="Fig Ellis emblem tile" />
      <div class="copy">
        <h1>Fig Ellis</h1>
        <p>Architectural simplicity · living system. Design, fieldworks, and tools — <em>designed in field light</em>.</p>
        <p class="meta">© 2025 Figellis, Inc. · Soft System Gold text (#C5A76C) on Cool Field Slate (#1E2328).</p>
        <p class="meta"><a href="/library/">Enter the Library</a> · <a href="/about/">About</a></p>
      </div>
    </section>
  </main>
</div>

<span class="mark" aria-hidden="true"></span>
<div class="tooltip" id="tooltip" role="status" aria-live="polite"></div>

<script>
  const artifacts = [
    { src: "/assets/feed/noir-plant-01.png", alt: "Artifact 01", desc: "Artifact 01 — placeholder cinematic tile."},
    { src: "/assets/feed/noir-plant-02.png", alt: "Artifact 02", desc: "Artifact 02 — placeholder cinematic tile."},
    { src: "/assets/feed/noir-plant-03.png", alt: "Artifact 03", desc: "Artifact 03 — placeholder cinematic tile."},
    { src: "/assets/feed/noir-plant-04.png", alt: "Artifact 04", desc: "Artifact 04 — placeholder cinematic tile."},
  ];

  const track = document.getElementById('artifactTrack');
  const tooltip = document.getElementById('tooltip');

  function buildSequence(){
    const frag = document.createDocumentFragment();
    artifacts.forEach(item => {
      const a = document.createElement('a');
      a.className = 'artifact';
      a.href = item.href || '#';
      a.setAttribute('aria-label', item.alt);
      const img = document.createElement('img');
      img.src = item.src; img.alt = item.alt;
      a.appendChild(img);

      a.addEventListener('mouseenter', () => { tooltip.textContent = item.desc || ''; tooltip.style.opacity='1'; });
      a.addEventListener('mousemove', (e) => { tooltip.style.left = e.clientX + 'px'; tooltip.style.top = e.clientY + 'px'; });
      a.addEventListener('mouseleave', () => { tooltip.style.opacity='0'; });

      frag.appendChild(a);
    });
    return frag;
  }

  function populateTrack(){
    track.innerHTML='';
    track.appendChild(buildSequence());
    track.appendChild(buildSequence());
  }

  function setAnimation(){
    const items = track.children;
    if(!items.length) return;
    let firstWidth = 0;
    for(let i=0;i<artifacts.length && i<items.length;i++){
      firstWidth += items[i].getBoundingClientRect().width;
      if(i < artifacts.length-1){ firstWidth += parseFloat(getComputedStyle(track).gap) || 0; }
    }
    const pps = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--speed-pps')) || 30;
    const duration = Math.max(10, firstWidth / pps);
    track.style.setProperty('--scroll-end', `-${firstWidth}px`);
    track.style.animation = `scrollLoop ${duration}s linear infinite`;
  }

  const feed = document.querySelector('.artifact-feed');
  feed.addEventListener('mouseenter', () => track.style.animationPlayState='paused');
  feed.addEventListener('mouseleave', () => track.style.animationPlayState='running');

  populateTrack();
  const imgs = Array.from(track.querySelectorAll('img'));
  let loaded = 0;
  imgs.forEach(img => img.addEventListener('load', () => { loaded++; if(loaded===imgs.length) setAnimation(); }, {once:true}));
  let resizeTO;
  window.addEventListener('resize', () => { clearTimeout(resizeTO); resizeTO = setTimeout(setAnimation, 120); });
</script>

<noscript>Fig Ellis — architectural simplicity meets living system.</noscript>
</body>
</html>
